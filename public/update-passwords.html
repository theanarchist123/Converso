<!DOCTYPE html>
<html>
<head>
    <title>Update Admin Passwords</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 800px; margin: 50px auto; padding: 20px; }
        .credentials { background: #f0f9ff; border: 2px solid #3b82f6; border-radius: 8px; padding: 20px; margin: 20px 0; }
        .credential-item { background: white; border-radius: 6px; padding: 15px; margin: 10px 0; border-left: 4px solid #10b981; }
        .password { font-family: monospace; background: #f3f4f6; padding: 4px 8px; border-radius: 4px; }
        button { background: #3b82f6; color: white; padding: 12px 24px; border: none; border-radius: 6px; cursor: pointer; }
        button:hover { background: #2563eb; }
        .warning { background: #fef3c7; border: 2px solid #f59e0b; border-radius: 8px; padding: 15px; margin: 20px 0; }
        .success { background: #d1fae5; border: 2px solid #10b981; border-radius: 8px; padding: 15px; margin: 20px 0; }
        .error { background: #fee2e2; border: 2px solid #ef4444; border-radius: 8px; padding: 15px; margin: 20px 0; }
    </style>
</head>
<body>
    <h1>üîê Admin Password Security Update</h1>
    
    <div class="warning">
        <h3>‚ö†Ô∏è Security Notice</h3>
        <p>The current admin passwords (<code>admin123</code>) are weak and may have been compromised in data breaches.</p>
        <p><strong>Click the button below to update all admin passwords to secure ones.</strong></p>
    </div>

    <button onclick="updatePasswords()">üîí Update to Secure Passwords</button>
    
    <div id="result"></div>

    <script>
        async function updatePasswords() {
            const resultDiv = document.getElementById('result');
            resultDiv.innerHTML = '<p>Updating passwords...</p>';
            
            try {
                const response = await fetch('/api/admin/update-passwords', {
                    method: 'POST'
                });
                
                const data = await response.json();
                
                if (data.success) {
                    resultDiv.innerHTML = `
                        <div class="success">
                            <h3>‚úÖ Passwords Updated Successfully!</h3>
                            <p>${data.message}</p>
                        </div>
                        
                        <div class="credentials">
                            <h3>üìã NEW SECURE ADMIN CREDENTIALS</h3>
                            <div class="credential-item">
                                <h4>üî¥ Super Admin (Full Access)</h4>
                                <p><strong>Email:</strong> admin@converso.com</p>
                                <p><strong>Password:</strong> <span class="password">ConV3rso@2025!Admin</span></p>
                                <p><strong>Access:</strong> Complete administrative control</p>
                            </div>
                            
                            <div class="credential-item">
                                <h4>üü° Moderator (Limited Access)</h4>
                                <p><strong>Email:</strong> moderator@converso.com</p>
                                <p><strong>Password:</strong> <span class="password">ConV3rso@2025!Mod</span></p>
                                <p><strong>Access:</strong> User and companion moderation</p>
                            </div>
                            
                            <div class="credential-item">
                                <h4>üü¢ Viewer (Read-only)</h4>
                                <p><strong>Email:</strong> viewer@converso.com</p>
                                <p><strong>Password:</strong> <span class="password">ConV3rso@2025!View</span></p>
                                <p><strong>Access:</strong> Analytics and reports viewing</p>
                            </div>
                        </div>
                        
                        <div style="background: #f3f4f6; padding: 15px; border-radius: 8px; margin: 20px 0;">
                            <h4>üõ°Ô∏è Security Features:</h4>
                            <ul>
                                <li>‚úÖ Strong passwords with special characters</li>
                                <li>‚úÖ Unique password for each role</li>
                                <li>‚úÖ Reset login attempts counter</li>
                                <li>‚úÖ No data breach history</li>
                            </ul>
                        </div>
                        
                        <div style="background: #eff6ff; padding: 15px; border-radius: 8px; margin: 20px 0;">
                            <h4>üìù Next Steps:</h4>
                            <ol>
                                <li>Copy the credentials you need</li>
                                <li>Store them securely (password manager recommended)</li>
                                <li>Go to <a href="/admin/login" target="_blank">/admin/login</a></li>
                                <li>Log in with your new secure credentials</li>
                            </ol>
                        </div>
                    `;
                } else {
                    resultDiv.innerHTML = `
                        <div class="error">
                            <h3>‚ùå Update Failed</h3>
                            <p>Error: ${data.error}</p>
                        </div>
                    `;
                }
            } catch (error) {
                resultDiv.innerHTML = `
                    <div class="error">
                        <h3>‚ùå Network Error</h3>
                        <p>Failed to connect to server: ${error.message}</p>
                    </div>
                `;
            }
        }
    </script>
</body>
</html>